<html>
<head>
	<meta charset="UTF-8">
	<title>Taurus Pilot</title>
	<script type="text/javascript" src="js/libs/jquery/jquery-2.1.4.min.js"></script>
	<script type="text/javascript" src="js/libs/three/three.js"></script>
	<script type="text/javascript" src="js/libs/three/keyboard.js"></script>
	<script type="text/javascript" src="js/libs/three/InputMapping.js"></script>
	<script type="text/javascript" src="js/libs/three/MTLLoader.js"></script>
	<script type="text/javascript" src="js/libs/three/OBJLoader.js"></script>
	<script type="text/javascript" src="js/libs/three/Game.js"></script>
	<script type="text/javascript" src="js/libs/three/Player.js"></script>
    <link rel="stylesheet" type="text/css" media="screen" href="css/game.css" />
	<script type="text/javascript">

	// var controls;
	// var objects = [];
	// var clock;
	// var deltaTime;
	var keys = {};
	var Jugador = new Game(1);

	//Variable que identificara los objetos con los que se desea saber
	// si se colisiona o no, entre mas objetos se tenga en el arreglo
	//mas lento sera el rendimiento
	//var objetosConColision = [];

	var isWorldReady = [ false ];
	$(document).ready(function() {
		Jugador._setupScene();
		Jugador.sceneStart();
		//setupScene();
		// loadOBJWithMTL("assets/", "planet1.obj", "planet1.mtl", (planet1) => {
		// 	SetObjectPos(planet1,0,-95,0);		
		// 	SetObjectRot(planet1,90,0,0);	
		// 	SetObjectEsc(planet1,18,18,18);
			
		// 	scene.add(planet1);
			
		// 	//Se agrega a la coleccion de objetos con colision
		// 	objetosConColision.push(planet1);

		// 	isWorldReady[0] = true;
		// });
		//playSound();
		Jugador._Loop();
		$("#scene-section").append(Jugador.renderer.domElement);
		//document.addEventListener('keydown', onKeyDown);
		//document.addEventListener('keyup', onKeyUp);		
	});

/*
    function onKeyDown(event) {
		keys[String.fromCharCode(event.keyCode)] = true;
	}
	function onKeyUp(event) {
		keys[String.fromCharCode(event.keyCode)] = false;
	}
	*/

	// function SetObjectPos(object,PosX,PosY,PosZ)
    // {
    //     object.position.x = PosX;
    //     object.position.y = PosY;
    //     object.position.z = PosZ;
    // }
	// function SetObjectRot(object,RotX,RotY,RotZ)
    // {
	// 	object.rotation.x = THREE.Math.degToRad(RotX);
	// 	object.rotation.y = THREE.Math.degToRad(RotY);
	// 	object.rotation.z = THREE.Math.degToRad(RotZ);
	// }
	// function SetObjectEsc(object,EscX,EscY,EscZ)
    // {
	// 	object.scale.x = EscX;
	// 	object.scale.y = EscY;
	// 	object.scale.z = EscZ;
    // }
    // function loadOBJWithMTL(path, objFile, mtlFile, onLoadCallback) {
	// 	let mtlLoader = new THREE.MTLLoader();
	// 	mtlLoader.setPath(path);
	// 	mtlLoader.load(mtlFile, (materials) => {
			
	// 		let objLoader = new THREE.OBJLoader();
	// 		objLoader.setMaterials(materials);
	// 		objLoader.setPath(path);
	// 		objLoader.load(objFile, (object) => {
	// 			onLoadCallback(object);
	// 		});

    //     });
    // }
	
	
	// function render() {
	// 	requestAnimationFrame(render);
	// 	deltaTime = clock.getDelta();	

	// 	var yaw = 0;
	// 	var forward = 0;
	// 	if (keys["W"]) {
	// 		forward = -20;
	// 	} else if (keys["S"]) {
	// 		forward = 20;
	// 	}

	// 	if (isWorldReady[0]) {
			
	// 		camera.rotation.y += yaw * deltaTime;
	// 		camera.translateZ(forward * deltaTime);
	// 	}
	// 	//scene.add(Jugador.ListObjs[0]);
	// 	//scene.add(Jugador.ContainerObj[1]);
	// 	renderer.render(scene, camera);
	// }

	// function setupScene() {		
	// 	var visibleSize = { width: window.innerWidth, height: window.innerHeight};
	// 	clock = new THREE.Clock();		
	// 	scene = new THREE.Scene();
	// 	camera = new THREE.PerspectiveCamera(75, visibleSize.width / visibleSize.height, 0.1, 600);
	// 	camera.position.z = 2;
	// 	camera.position.y = 50;
	// 	camera.rotation.x = THREE.Math.degToRad(-90);

	// 	renderer = new THREE.WebGLRenderer( {precision: "mediump" } );
	// 	renderer.setClearColor(new THREE.Color(0, 0, 0));
	// 	renderer.setPixelRatio(visibleSize.width / visibleSize.height);
	// 	renderer.setSize(visibleSize.width, visibleSize.height);

	// 	var ambientLight = new THREE.AmbientLight(new THREE.Color(1, 1, 1), 1.0);
	// 	scene.add(ambientLight);

	// 	var directionalLight = new THREE.DirectionalLight(new THREE.Color(1, 1, 0), 0.4);
	// 	directionalLight.position.set(0, 0, 1);
	// 	scene.add(directionalLight);

	// 	var grid = new THREE.GridHelper(50, 10, 0xffffff, 0xffffff);
	// 	grid.position.y = -1;
	// 	scene.add(grid);

	//	$("#scene-section").append(Jugador.renderer.domElement);
	//}

	function playSound() {
            var audio = document.getElementById('audioplayer');
            if (audio.paused) {
				audio.play();
            }else{
                audio.pause();
            }
		}
	
	function tellme()
	{
		alert('Ready =' + isWorldReady + 'Rendereando');
	}

	</script>
</head>

<body>

	<div id="scene-section"/>
	<audio id="audioplayer" loop ><!-- autoplay--><!--猫又Call-->
		<source src="Resources/Call.mp3" type="audio/mpeg"/>
	</audio>
	<div id="OptionsModal" class="modalOption">
			<div class="modalOptionContent">
				<span class="closeOptions">&times;</span>
				<div class="wrapper2">
					<h3 id="element1">Habilitar Musica</h3>
					<label class="switch">  
					<input type="checkbox" checked="True" onclick="playSound()">
					<span  id="element3" class="slider round"></span>
					</label>
					<h3 id="element2">Habilitar Sonidos</h3>
					<label class="switch">  
					<input type="checkbox">
					<span  id="element3" class="slider round"></span>
					</label>
				</div>
			</div>
		</div>
		<div id="pauseButton">
				<button id="pause">Pausar</button>
		</div>
		<script>
				// ModalOptions
				var modal = document.getElementById('OptionsModal');
		
				// Get the button that opens the modal
				var btn = document.getElementById("pause");
		
				// Get the <span> element that closes the modal
				var span = document.getElementsByClassName("closeOptions")[0];
		
				// When the user clicks on the button, open the modal 
				btn.onclick = function() {
					modal.style.display = "block";
				}
		
				// When the user clicks on <span> (x), close the modal
				span.onclick = function() {
					modal.style.display = "none";
				}
		
				// When the user clicks anywhere outside of the modal, close it
				window.onclick = function(event) {
					if (event.target == modal) {
						modal.style.display = "none";
					}
				}
			</script>
</body>
</html>